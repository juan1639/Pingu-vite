var t=Object.defineProperty,e=(e,o,s)=>(((e,o,s)=>{o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[o]=s})(e,"symbol"!=typeof o?o+"":o,s),s);import{p as o}from"./phaser-cxBNu8M8.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const o of t)if("childList"===o.type)for(const t of o.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const s=class t{static getLayer1(){return t.layer1}static getTxtScore(){return t.txtScore}static isNivelSuperado(){return t.pausas.nivelSuperado.superado}static isPausaInicial(){return t.pausas.inicial}static getPausaNivelSuperado(){return t.pausas.nivelSuperado.duracion}static isGameOver(){return t.gameOver}static getPuntos(){return t.puntos}static getNivel(){return t.nivel}static getRecord(){return t.hi}static getVidas(){return t.vidas}static getVelJugador(){return t.velJugador}static isJugadorMoving(){return t.jugador.moving}static getCameraScores(){return t.cameraScores}static getCameraControles(){return t.cameraControles}static setLaye1ScaleX(e){t.layer1.scaleX=e}static setLaye1ScaleY(e){t.layer1.scaleY=e}static setNivelSuperado(e){t.pausas.nivelSuperado.superado=e}static setGameOver(e){t.gameOver=e}static setPuntos(e){t.puntos=e}static setNivel(e){t.nivel=e}static setRecord(e){t.hi=e}static setVidas(e){t.vidas=e}static setJugadorMoving(e){t.jugador.moving=e}static setPausaInicial(e){t.pausas.inicial=e}};e(s,"controlElegido",{mobile:!1,teclado:!0}),e(s,"screen",{width:800,height:550,escBoundsX:1.1,escBoundsY:1.25}),e(s,"tileXY",{x:48,y:48}),e(s,"layer1",{scaleX:1,scaleY:1}),e(s,"gameOver",!1),e(s,"puntos",0),e(s,"nivel",1),e(s,"hi",12e3),e(s,"vidas",3),e(s,"txtScore"," Score: "),e(s,"velJugador",4),e(s,"jugador",{posIniX:9,posIniY:7,oriX:.5,oriY:.5,velX:s.velJugador,velY:s.velJugador,moving:!1,direccion:{le:[-1,0,0,"le"],ri:[1,0,0,"ri"],up:[0,-1,0,"up"],do:[0,1,0,"do"]},teclas:{le:"left",ri:"right",up:"up",do:"down"}}),e(s,"bloques",{vel:200,velPxl:4}),e(s,"mideTiempo",[null,null,200]),e(s,"incGodownInvaders",[2,2,4,5,8,10,12,15,18,20,22,25,28,30,30,30,30,30,30,30,30]),e(s,"pausas",{inicial:!1,revivir:4e3,invisible:3e3,showBonus:3500,nivelSuperado:{superado:!1,duracion:3200},duracionExplosion:{jugador:1e3,enemigo:400}}),e(s,"depth",{fondo:-900,bloques:-800,limites:-700,jugador:-600,enemigo:-500,explosiones:-400,marcadores:-300,botones:-200,botonesTxt:-150,textos:-100,mobileControls:-50}),e(s,"cameraScores",{x:0,y:0,ancho:800,alto:34,scrollX:0,scrollY:-90}),e(s,"cameraControles",{x:Math.floor(s.screen.width/1.3),y:Math.floor(s.screen.height/1.4),ancho:270,alto:270,scrollX:Math.floor(s.screen.width/1.3),scrollY:-600}),e(s,"audio",{monedaMario:null,musicaFondo:null});let i=s;class a{constructor(t,e){this.relatedScene=t,this.datos=e}create(){const{x:t,y:e,txt:o,size:s,color:i,style:a,stroke:r,sizeStroke:n,shadowOsx:l,shadowOsy:h,shadowColor:c,bool1:d,bool2:g,origin:u,elastic:m,dura:p}=this.datos;this.texto=this.relatedScene.add.text(t,e,o,{fontSize:s+"px",fill:i,fontFamily:"verdana, arial, sans-serif",fontStyle:a}),this.texto.setOrigin(u[0],u[1]),this.texto.setStroke(r,n),this.texto.setShadow(l,h,c,2,d,g),this.elastic(o,m,p),console.log(this.texto)}elastic(t,e,o){o>0&&this.relatedScene.tweens.add({targets:this.texto,y:e,ease:"Elastic",duration:o})}get(){return this.texto}}class r extends o.Scene{constructor(){super("Boot")}init(){this.txt=new a(this,{x:Math.floor(this.sys.game.config.width/2),y:Math.floor(this.sys.game.config.height/2),txt:" Touch screen or \n \n click to start... ",size:60,color:"#ffa",style:"bold",stroke:"#1e9",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0})}preload(){this.load.image("fondo","assets/img/bg.png")}create(){this.add.image(0,0,"fondo").setOrigin(0,0),this.txt.create(),this.input.on("pointerdown",(()=>this.scene.start("Preloader"))),console.log(this.txt)}}class n extends o.Scene{constructor(){super("Preloader")}init(){const t=this.sys.game.config.width,e=this.sys.game.config.height;this.load.image("fondo","assets/img/bg.png"),this.add.image(0,0,"fondo").setOrigin(0,0),this.txt=new a(this,{x:Math.floor(t/2),y:Math.floor(e/3.5),txt:" Loading...",size:55,color:"#ffa",style:"bold",stroke:"#f91",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txt.create(),this.add.rectangle(Math.floor(t/2),Math.floor(e/2),Math.floor(t/1.5),Math.floor(e/12)).setStrokeStyle(1,16772744);const o=this.add.rectangle(Math.floor(t/2)-Math.floor(t/3)+4,Math.floor(e/2),4,Math.floor(e/14),16750865);this.load.on("progress",(e=>{o.width=Math.floor(t/1.52)*e}))}preload(){this.load.setPath("assets"),this.load.image("fondo","./img/bg.png"),this.load.image("boton-nueva-partida","./img/ui-newgame.png"),this.load.image("boton-fire-joystick","./img/ui-1.png"),this.load.spritesheet("radio-buttons","./img/radio-buttons-lightblue.png",{frameWidth:50,frameHeight:50}),this.load.spritesheet("boton-fullscreen","./img/boton-fullscreen.png",{frameWidth:64,frameHeight:64});for(let t=1;t<5;t++)this.load.image(`tile${t}`,`./img/tile${t}.png`);this.load.atlas("tiles-jewels","./img/jewels.png","./img/jewels.json"),this.load.spritesheet("pengo-ssheet","./img/pengo-ssheet.png",{frameWidth:50,frameHeight:50}),this.load.plugin("rexvirtualjoystickplugin","https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/dist/rexvirtualjoystickplugin.min.js",!0),this.load.audio("gameover-retro","./audio/gameoveretro.ogg"),this.load.audio("get-ready","./audio/get-ready.mp3"),this.load.audio("ziuuu","./audio/jumpbros.ogg"),this.load.audio("moneda-mario","./audio/p-ping.mp3"),this.load.audio("ziuuu1","./audio/slide-whistle-1.mp3"),this.load.audio("ziuuu2","./audio/slide-whistle-2.mp3"),this.load.audio("musica-fondo","./audio/musica-fondo.mp3"),this.load.audio("crash","./audio/crash.mp3")}create(){this.scene.start("MainMenu")}}function l(t,e){if(this.jugador.controles.space.isDown||console.log("colision:"+e.getData("id")),this.jugador.controles.space.isDown&&i.controlElegido.teclado||this.botonfire.isDown&&i.controlElegido.mobile){let t=99;d(this.sonido_ziuuu,!1,.2),i.mideTiempo[0]=this.time.now,Object.values(i.jugador.teclas).forEach(((e,o)=>{this.jugador.controles[e].isDown&&(t=o)})),console.log("empujando:"+e.getData("id"),t);const o=[[-1,0],[1,0],[0,-1],[0,1]];t>=0&&t<4&&(e.setData("vel-x",o[t][0]*i.bloques.velPxl),e.setData("vel-y",o[t][1]*i.bloques.velPxl))}this.jugador.get().setX(this.jugador.viejaX),this.jugador.get().setY(this.jugador.viejaY)}function h(t,e){this.jugador.controles.space.isDown||console.log("colision:"+e.getData("id")),this.jugador.controles.space.isDown&&console.log("empujando:"+e.getData("id")),this.jugador.get().setX(this.jugador.viejaX),this.jugador.get().setY(this.jugador.viejaY)}function c(t,e){i.mideTiempo[1]=this.time.now;const o=i.mideTiempo[2];i.mideTiempo[1]-i.mideTiempo[0]<o&&(console.log("romper!!"),d(this.sonido_crash,!1,.6)),t.setX(t.x+-t.getData("vel-x")),t.setY(t.y+-t.getData("vel-y")),t.setData("vel-x",0).setData("vel-y",0)}function d(t,e,o){t.volume=o,t.loop=e,t.play()}class g{constructor(t,e){this.relatedScene=t,this.args=e}create(){i.audio.monedaMario=this.relatedScene.sound.add("moneda-mario");const{left:t,top:e,id:o,scX:s,scY:r,angle:n,originX:l,originY:h,texto:c,nextScene:g}=this.args;this.boton=this.relatedScene.add.sprite(t,e,o).setInteractive(),this.boton.setScale(s,r).setAngle(1).setDepth(i.depth.botones),this.txt=new a(this.relatedScene,{x:t,y:e,txt:c,size:30,color:"#ff1",style:"bold",stroke:"#1bd",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txt.create(),this.txt.get().setDepth(i.depth.botonesTxt).setAlpha(1).setScale(1),this.boton.on("pointerover",(()=>{this.boton.setScale(s+.1,r+.1)})),this.boton.on("pointerout",(()=>{this.boton.setScale(s,r)})),this.boton.on("pointerdown",(t=>{d(i.audio.monedaMario,!1,.7),this.relatedScene.scene.start(g)})),this.relatedScene.tweens.add({targets:[this.boton,this.txt.get()],angle:359,ease:"Elastic",yoyo:!0,hold:3e3,duration:2e3,repeat:-1})}get(){return this.boton}}class u{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{x:t,y:e,id:o,orX:s,orY:a,scX:r,scY:n,ang:l}=this.args;this.boton=this.relatedScene.add.image(t,e,o).setInteractive(),this.boton.setOrigin(s,a).setScale(r,n),this.boton.setAngle(l).setFrame(0).setDepth(i.depth.botones),this.boton.setX(t).setY(e),this.boton.on("pointerover",(()=>{this.boton.setScale(r+.1,n+.1)})),this.boton.on("pointerout",(()=>{this.boton.setScale(r,n)})),this.boton.on("pointerdown",(()=>{this.relatedScene.scale.isFullscreen?this.relatedScene.scale.stopFullscreen():this.relatedScene.scale.startFullscreen()}))}}class m{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{left:t,top:e,id:o,scX:s,scY:r,angle:n,originX:l,originY:h,texto:c,nextScene:d}=this.args;this.boton=this.relatedScene.add.sprite(t,e,o).setInteractive(),this.boton.setOrigin(l,h).setScale(s,r).setAngle(n).setDepth(i.depth.botones),this.txt=new a(this.relatedScene,{x:t,y:e,txt:c,size:25,color:"#fb1",style:"bold",stroke:"#f81",sizeStroke:8,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txt.create(),this.txt.get().setDepth(i.depth.botonesTxt).setAlpha(1).setScale(1),this.boton.on("pointerover",(()=>{this.boton.setScale(s+.03,r+.03)})),this.boton.on("pointerout",(()=>{this.boton.setScale(s,r)})),this.boton.on("pointerdown",(t=>{c.includes("Music")&&(i.audio.musicaFondo.volume>0?(i.audio.musicaFondo.volume=0,this.txt.get().setAlpha(.3)):(i.audio.musicaFondo.volume=.6,this.txt.get().setAlpha(1))),""!==d&&this.relatedScene.scene.start(d)}))}get(){return this.boton}}class p extends o.Scene{constructor(){super("MainMenu")}init(){this.botoninicio=new g(this,{left:Math.floor(this.sys.game.config.width/2),top:Math.floor(this.sys.game.config.height/1.3),id:"boton-nueva-partida",scX:.7,scY:.7,angle:1,originX:.5,originY:.5,texto:" New Game ",nextScene:"PreGame"}),this.txt=new a(this,{x:Math.floor(this.sys.game.config.width/2),y:0,txt:" PinguClon ",size:100,color:"#ffa",style:"bold",stroke:"#1ca",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:Math.floor(this.sys.game.config.height/4),dura:3e3})}preload(){}create(){this.add.image(0,0,"fondo").setOrigin(0,0).setDepth(i.depth.fondo),this.txt.create(),this.add.text(Math.floor(this.sys.game.config.width/4),Math.floor(this.sys.game.config.height/1.04),"Based on classic arcade game Pengo of Sega 1982",{fontSize:"16px",color:"#9ff",align:"justify",fontFamily:"Arial"}),this.add.timeline([{at:1800,run:()=>{this.botoninicio.create("PreGame",!1)}}]).play(),console.log(this.txt)}}class f{}e(f,"array_levels",[[[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,1,1,1,1,1,1,1,1,9,1,1,1,1,1,1,1,1,9],[9,1,9,9,1,9,9,9,1,9,1,9,9,9,1,9,9,1,9],[9,1,9,9,1,9,9,9,1,9,1,9,9,9,1,9,9,1,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9],[9,1,9,9,1,9,1,9,9,9,9,9,1,9,1,9,9,1,9],[9,1,1,1,1,9,1,1,1,9,1,1,1,9,1,1,1,1,9],[9,9,9,9,1,9,9,9,1,9,1,9,9,9,1,9,9,9,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9],[9,1,9,9,1,9,1,9,1,9,1,9,1,9,1,9,9,1,9],[9,1,9,9,1,9,1,9,1,9,1,9,1,9,1,9,9,1,9],[9,1,1,1,1,9,1,1,1,1,1,1,1,9,1,1,1,1,9],[9,1,9,9,1,9,1,9,9,9,9,9,1,9,1,9,9,1,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,6,1,6,6,6,1,6,6,6,6,6,1,6,6,6,6,6,1],[1,6,1,6,1,1,1,1,1,1,1,6,1,6,1,1,1,6,1],[1,6,6,6,1,6,6,6,6,6,1,6,1,6,6,6,6,6,1],[1,6,1,1,1,6,1,1,1,6,1,6,1,6,1,1,1,6,1],[1,6,6,6,6,6,1,6,6,6,1,6,6,6,6,6,1,6,1],[1,1,1,1,1,1,1,6,1,1,1,6,1,1,1,6,1,6,1],[1,6,6,6,6,6,6,6,1,6,6,6,6,6,1,6,1,6,1],[1,6,1,1,1,1,1,6,1,6,1,1,1,1,1,6,1,6,1],[1,6,1,6,6,6,6,6,1,6,1,6,6,6,6,6,6,6,1],[1,6,1,6,1,1,1,1,1,6,1,1,1,1,6,1,1,6,1],[1,6,6,6,6,6,6,6,1,6,6,6,6,6,6,6,1,6,1],[1,1,1,1,1,1,1,6,1,1,1,1,1,1,1,6,1,6,1],[1,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]]);class y{constructor(t){this.relatedScene=t}create(){this.tile=this.relatedScene.physics.add.group();const t=i.getNivel();for(let e=0;e<f.array_levels[t].length;e++)for(let o=0;o<f.array_levels[t][e].length;o++){const s=f.array_levels[t][e][o];this.elegir_tilesNiveles(s,e,o)}this.tile.children.iterate(((t,e)=>{t.setScale(.75).setImmovable(!0).refreshBody().setDepth(i.depth.bloques),t.setData("id",e),t.setData("vel-x",0).setData("vel-y",0),t.setData("recorrido",0)})),console.log(this.tile)}update(){this.tile.children.iterate(((t,e)=>{0===t.getData("vel-x")&&0===t.getData("vel-y")||(t.setX(t.x+t.getData("vel-x")),t.setY(t.y+t.getData("vel-y")),t.setData("recorrido",t.getData("recorrido")+1))}))}static check_colision(t,e){const o=i.getNivel();return 9===f.array_levels[o][e][t]}elegir_tilesNiveles(t,e,o){6!==t&&this.tile.create(o*i.tileXY.x,e*i.tileXY.y,`tile${t}`)}set_idFormat(t){const e=i.getNivel(),o=Math.floor(t/i.matrixLevels.array_levels[e][0].length);return[o,t-o*i.matrixLevels.array_levels[e][0].length]}get(){return this.tile}}class b{constructor(t){this.relatedScene=t}create(){const t=["diamond_","prism_","ruby_","square_",15,6,6,14];i.getNivel()>1&&this.anims.remove("jewels-anim"),this.relatedScene.anims.create({key:"jewels-anim",frames:this.relatedScene.anims.generateFrameNames("tiles-jewels",{prefix:t[3],end:t[7],zeroPad:4}),frameRate:20,repeat:-1}),this.jewels=this.relatedScene.physics.add.group();for(let e=0;e<3;e++){const t=i.getNivel(),e=f.array_levels[t];let o,s;do{o=Phaser.Math.Between(1,e[0].length-2),s=Phaser.Math.Between(1,e.length-2)}while(6!==e[s][o]||s===i.jugador.posIniY&&o===i.jugador.posIniX);this.jewels.create(o*i.tileXY.x,s*i.tileXY.y).setScale(.75)}this.jewels.children.iterate(((t,e)=>{t.play("jewels-anim",!0),t.setData("id",e)})),console.log(this.jewels)}update(){}get(){return this.jewels}}class x{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{x:t,y:e,oriX:o,oriY:s}=this.args;this.jugador=this.relatedScene.physics.add.sprite(t,e,"pengo-ssheet"),this.jugador.setOrigin(o,s),this.jugador.setAngle(0).setDepth(i.depth.jugador).setScale(.9),this.jugador.setCircle(Math.floor(i.tileXY.y/2)),this.jugador.setData("direccion","ri"),this.jugador.setData("anima",this.jugador.getData("direccion"));const a=[["le",2,3],["ri",6,7],["up",4,5],["do",0,1]];for(let i=0;i<a.length;i++)this.relatedScene.anims.create({key:a[i][0],frames:this.relatedScene.anims.generateFrameNumbers("pengo-ssheet",{start:a[i][1],end:a[i][2]}),frameRate:5,yoyo:!0,repeat:-1});this.relatedScene.anims.create({key:"turn",frames:[{key:"pengo-ssheet",frame:23}],frameRate:20}),this.jugador.anims.play(this.jugador.getData("anima"),!0),this.controles=this.relatedScene.input.keyboard.createCursorKeys(),console.log(this.jugador)}update(){this.jugador.x%i.tileXY.x==0&&this.jugador.y%i.tileXY.y==0&&(i.setJugadorMoving(!1),this.viejaX=this.jugador.x,this.viejaY=this.jugador.y),i.jugador.direccion,i.isJugadorMoving()?this.set_velocity():(Object.keys(i.jugador.direccion).forEach((t=>{const e=i.jugador.teclas[t];(this.controles[e].isDown||this.relatedScene.joystickCursors[e].isDown)&&(i.setJugadorMoving(!0),this.jugador.setData("direccion",t),this.jugador.setData("anima",this.jugador.getData("direccion")),this.jugador.anims.play(this.jugador.getData("anima"),!0),this.jugador.setAngle(i.jugador.direccion[this.jugador.getData("direccion")][2]),this.set_velocity())})),this.controles.space.isDown)}set_velocity(){const t=i.jugador.direccion[this.jugador.getData("direccion")][0],e=i.jugador.direccion[this.jugador.getData("direccion")][1];this.jugador.x+=t*i.jugador.velX,this.jugador.y+=e*i.jugador.velY}handlePushBlock(){const t=Math.floor(this.jugador.x/i.tileXY.x)+i.jugador.direccion[this.jugador.getData("direccion")][0],e=Math.floor(this.jugador.y/i.tileXY.y)+i.jugador.direccion[this.jugador.getData("direccion")][1],o=i.getNivel();6!==f.array_levels[o][e][t]&&console.log(`empujar:${e}${t}`);const s=this.jugador.x+i.jugador.direccion[this.jugador.getData("direccion")][0]*i.tileXY.x,a=this.jugador.y+i.jugador.direccion[this.jugador.getData("direccion")][1]*i.tileXY.y;this.relatedScene.jewels.get().children.iterate(((t,e)=>{s===t.x&&a===t.y&&console.log("empujarJewel"+e)}))}get(){return this.jugador}}class w{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{left:t,top:e}=this.args;this.jugadorshowvidas=this.relatedScene.physics.add.group({key:["pacman"],frameQuantity:i.getVidas(),setXY:{x:t,y:e,stepX:i.tileXY.x},frame:4}),this.jugadorshowvidas.children.iterate((t=>{t.setOrigin(.5,0).setScale(1,.7).setBlendMode(Phaser.BlendModes.ADD)})),console.log(this.jugadorshowvidas)}get(){return this.jugadorshowvidas}}class v{constructor(t,e){this.relatedScene=t,this.datos=e}create(){const{x:t,y:e,size:o,txt:s,color:a,strokeColor:r,id:n}=this.datos;let l="";0===n&&(l=`${s}${i.getPuntos()}`),1===n&&(l=`${s}${i.getNivel()}`),2===n&&(l=`${s}${i.getRecord()}`),this.marcador=this.relatedScene.add.text(t,e,l,{fontSize:o+"px",fill:a,fontFamily:"verdana, arial, sans-serif",fontStyle:"bold"}),this.marcador.setStroke(r,16).setShadow(2,2,"#111111",2,!1,!0),console.log(this.marcador)}update(t,e){this.marcador.setText(`${t}${e}`)}get(){return this.marcador}}class j{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{left:t,top:e,id:o,scX:s,scY:r,angle:n,originX:l,originY:h,alpha:c,texto:d}=this.args;this.isDown=!1,this.boton=this.relatedScene.add.sprite(t,e,o).setInteractive(),this.boton.setOrigin(l,h).setScale(s,r).setAngle(n).setAlpha(c),this.boton.setDepth(i.depth.botones),this.txt=new a(this.relatedScene,{x:t,y:e,txt:d,size:30,color:"#fb1",style:"bold",stroke:"#f81",sizeStroke:8,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txt.create(),this.txt.get().setDepth(i.depth.mobileControls).setAlpha(c+.1).setScale(1),this.boton.on("pointerover",(()=>{this.boton.setScale(s+.1,r+.1)})),this.boton.on("pointerout",(()=>{this.boton.setScale(s,r)})),this.boton.on("pointerdown",(()=>{this.isDown=!0})),this.boton.on("pointerup",(()=>{this.isDown=!1}))}get(){return this.boton}}class S extends o.Scene{constructor(){super("Game")}init(){i.setGameOver(!1),this.set_pausaInicial(2800),this.bloques=new y(this),this.jewels=new b(this),this.jugador=new x(this,{x:i.jugador.posIniX*i.tileXY.x,y:i.jugador.posIniY*i.tileXY.y,oriX:i.jugador.oriX,oriY:i.jugador.oriY}),this.botonfire=new j(this,{left:Math.floor(this.sys.game.config.width/1.1),top:-500,id:"boton-fire-joystick",scX:.6,scY:1.1,angle:0,originX:.5,originY:.5,alpha:.6,texto:"Push"}),this.instanciar_marcadores()}preload(){}create(){this.add.image(0,0,"fondo").setScale(1.48,1.68).setDepth(i.depth.fondo).setOrigin(0,0),this.set_sonidos(),this.set_cameras(),this.set_cameras_controles(),this.set_cameras_marcadores(),this.bloques.create(),this.jewels.create(),this.jugador.create(),this.marcadorPtos.create(),this.marcadorNivel.create(),this.marcadorHi.create(),this.botonfullscreen.create(),this.botonesc.create(),this.rexVirtualJoystick(),this.botonfire.create(),this.hideMobileControls(),this.cameras.main.startFollow(this.jugador.get()),this.set_colliders()}update(){i.pausas.inicial||i.isGameOver()||(this.bloques.update(),this.jugador.update())}set_pausaInicial(t){i.setPausaInicial(!0),this.txtpreparado=new a(this,{x:Math.floor(this.sys.game.config.width/2),y:0,txt:" Ready! ",size:78,color:"#ffa",style:"bold",stroke:"#af1",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:Math.floor(this.sys.game.config.height/2),dura:2800}),this.txtpreparado.create(),this.txtpreparado.get().setDepth(i.depth.textos),this.add.timeline([{at:t-300,run:()=>{d(i.audio.musicaFondo,!0,.6)}},{at:t,run:()=>{i.setPausaInicial(!1),this.txtpreparado.get().setVisible(!1),this.set_txtGo()}}]).play(),console.log(this.txtpreparado)}set_txtGo(){const t=new a(this,{x:Math.floor(this.sys.game.config.width/2),y:Math.floor(this.sys.game.config.height/2),txt:" Go! ",size:90,color:"#ffa",style:"bold",stroke:"#4f1",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0});t.create(),t.get().setDepth(i.depth.textos),this.tweens.add({targets:t.get(),alpha:0,duration:2200})}texto_enhorabuena(){this.txtcongrats=new a(this,{x:this.jugador.get().x,y:0,txt:" Congratulations! ",size:70,color:"#ffa",style:"bold",stroke:"#5f1",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:this.jugador.get().y-i.tileXY.y,dura:3e3}),this.txtcongrats.create(),this.txtcongrats.get().setDepth(i.getDepth().textos)}set_colliders(){this.physics.add.collider(this.jugador.get(),this.bloques.get(),l,null,this),this.physics.add.collider(this.jugador.get(),this.jewels.get(),h,null,this),this.physics.add.collider(this.bloques.get(),this.bloques.get(),c,null,this)}rexVirtualJoystick(){this.joyStick=this.plugins.get("rexvirtualjoystickplugin").add(this,{x:90,y:this.sys.game.config.height-50,radius:60,base:this.add.circle(0,0,60,8947848,.4),thumb:this.add.circle(0,0,30,13421772,.7),dir:"4dir",fixed:!0,enable:!0}),console.log(this.joyStick),this.joystickCursors=this.joyStick.createCursorKeys()}hideMobileControls(){console.log(i.controlElegido),i.controlElegido.mobile||(this.joyStick.setVisible(!1),this.botonfire.get().setVisible(!1),this.botonfire.txt.get().setVisible(!1))}set_cameras(){this.cameras.main.setBounds(0,-Math.floor(i.tileXY.y/2),Math.floor(this.sys.game.config.width*i.screen.escBoundsX),Math.floor(this.sys.game.config.height*i.screen.escBoundsY+Math.floor(i.tileXY.y/2))),this.physics.world.setBounds(0,-Math.floor(i.tileXY.y/2),Math.floor(this.sys.game.config.width*i.screen.escBoundsX),Math.floor(this.sys.game.config.height*i.screen.escBoundsY+Math.floor(i.tileXY.y/2)))}set_cameras_controles(){var{x:t,y:e,ancho:o,alto:s,scrollX:a,scrollY:r}=i.getCameraControles();this.mapa_controles=this.cameras.add(t,e,o,s).setZoom(.9).setName("view-controls").setAlpha(1).setOrigin(0,0),this.mapa_controles.scrollX=a,this.mapa_controles.scrollY=r}set_cameras_marcadores(){var{x:t,y:e,ancho:o,alto:s,scrollX:a,scrollY:r}=i.getCameraScores();this.mapa_scores=this.cameras.add(t,e,o,s).setZoom(.6).setName("view-scores").setAlpha(1).setOrigin(0,0),this.mapa_scores.scrollX=a,this.mapa_scores.scrollY=r}instanciar_marcadores(){const t=this.sys.game.config.width;this.sys.game.config.height;this.jugadorshowvidas=new w(this,{left:Math.floor(1.4*t),top:-90}),this.marcadorPtos=new v(this,{x:10,y:-99,size:40,txt:i.getTxtScore(),color:"#fff",strokeColor:"#af1",id:0}),this.marcadorNivel=new v(this,{x:Math.floor(t/2),y:-99,size:40,txt:" Level: ",color:"#ff5",strokeColor:"#16d",id:1}),this.marcadorHi=new v(this,{x:Math.floor(t/1.2),y:-99,size:40,txt:" Record: ",color:"#fff",strokeColor:"#af1",id:2}),this.botonfullscreen=new u(this,{x:Math.floor(1.55*t),y:-92,id:"boton-fullscreen",orX:0,orY:0,scX:1.2,scY:.8,ang:0}),this.botonesc=new m(this,{left:Math.floor(1.42*t),top:-73,id:"boton-fire-joystick",scX:.5,scY:.5,angle:0,originX:.5,originY:.5,texto:"Music",nextScene:""})}set_sonidos(){this.sonido_getReady=this.sound.add("get-ready"),d(this.sonido_getReady,!1,.9),this.sonido_ziuuu=this.sound.add("ziuuu1"),this.sonido_crash=this.sound.add("crash"),i.audio.musicaFondo=this.sound.add("musica-fondo")}}class M{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{left:t,top:e,frame:o,scale:s,texto:r,id:n}=this.args;this.radiobutton=this.relatedScene.add.sprite(t,e,"radio-buttons").setInteractive(),this.radiobutton.setOrigin(0,.5).setScale(s).setDepth(i.depth.textos).setFrame(o),this.radiobutton.setData("id",n),this.txt=new a(this.relatedScene,{x:t+60,y:e,txt:r,size:50,color:"#ffa",style:"bold",stroke:"#1fb",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[0,.5],elastic:!1,dura:0}),this.txt.create(),this.radiobutton.on("pointerover",(()=>{this.txt.get().setScale(s+.1),this.radiobutton.setScale(s+.1)})),this.radiobutton.on("pointerout",(()=>{this.txt.get().setScale(s),this.radiobutton.setScale(s)})),this.radiobutton.on("pointerdown",(t=>{this.relatedScene.radiobuttons.forEach((t=>t.get().setFrame(0))),this.radiobutton.setFrame(1),Object.keys(i.controlElegido).forEach((t=>{i.controlElegido[t]=!1})),i.controlElegido[this.radiobutton.getData("id")]=!0,console.log(i.controlElegido.mobile,i.controlElegido.teclado)}))}get(){return this.radiobutton}}class D extends o.Scene{constructor(){super("PreGame")}init(){i.setPuntos(0),i.setNivel(1),i.setVidas(3),i.setGameOver(!1),i.setNivelSuperado(!1),i.controlElegido.mobile=!1,i.controlElegido.teclado=!0,this.botoninicio=new g(this,{left:Math.floor(this.sys.game.config.width/2),top:Math.floor(this.sys.game.config.height/1.3),id:"boton-nueva-partida",scX:.7,scY:.7,angle:1,originX:.5,originY:.5,texto:" Start ",nextScene:"Game"}),this.radiobuttons=[],this.radiobuttons.push(new M(this,{left:Math.floor(this.sys.game.config.width/15),top:Math.floor(this.sys.game.config.height/4),frame:1,scale:1,texto:" Keyboard cursors ",id:"teclado"})),this.radiobuttons.push(new M(this,{left:Math.floor(this.sys.game.config.width/15),top:Math.floor(this.sys.game.config.height/2.6),frame:0,scale:1,texto:" Mobile controls ",id:"mobile"}))}create(){this.add.image(0,0,"fondo").setDepth(i.depth.fondo).setOrigin(0,0),this.radiobuttons.forEach((t=>t.create())),this.botoninicio.create("Game",!1)}}class X extends Phaser.Scene{constructor(){super({key:"Congratulations"})}init(){this.botoninicio=new g(this)}create(){this.add.image(0,0,"fondo").setOrigin(0,0),this.incremento_nivel=i.getNivel()+1,i.setNivelSuperado(!1),this.sonido_intermision=this.sound.add("aliens-atmos"),this.txt=new a(this,{x:Math.floor(this.sys.game.config.width/2),y:Math.floor(this.sys.game.config.height/3.5),txt:" Level Up! ",size:86,color:"#ffa",style:"bold",stroke:"#1cb",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txt.create(),this.txt.get().setDepth(i.depth.textos).setAlpha(1),this.timeline=this.add.timeline([{at:3200,run:()=>{i.setNivel(this.incremento_nivel),this.botoninicio.create("Game",!1)}}]),this.timeline.play(),d(this.sonido_intermision,!1,.8),console.log(this.txt)}}const Y={type:Phaser.AUTO,width:800,height:550,parent:"game-container",backgroundColor:"#655500",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{debug:!1}},scene:[r,n,p,D,S,X]};new Phaser.Game(Y);
