var t=Object.defineProperty,e=(e,s,o)=>(((e,s,o)=>{s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o})(e,"symbol"!=typeof s?s+"":s,o),o);import{p as s}from"./phaser-cxBNu8M8.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const o=class t{static isNivelSuperado(){return t.pausas.nivelSuperado.superado}static getPausaNivelSuperado(){return t.pausas.nivelSuperado.duracion}static isGameOver(){return t.gameOver}static getPuntos(){return t.puntos}static getNivel(){return t.nivel}static getRecord(){return t.hi}static getVidas(){return t.vidas}static getVelJugador(){return t.velJugador}static isJugadorMoving(){return t.jugador.moving}static setNivelSuperado(e){t.pausas.nivelSuperado.superado=e}static setGameOver(e){t.gameOver=e}static setPuntos(e){t.puntos=e}static setNivel(e){t.nivel=e}static setRecord(e){t.hi=e}static setVidas(e){t.vidas=e}static setJugadorMoving(e){t.jugador.moving=e}};e(o,"controlElegido",{mobile:!1,teclado:!0}),e(o,"screen",{width:800,height:550,escBoundsX:1.1,escBoundsY:1.25}),e(o,"tileXY",{x:48,y:48}),e(o,"gameOver",!1),e(o,"puntos",0),e(o,"nivel",1),e(o,"hi",12e3),e(o,"vidas",3),e(o,"velJugador",4),e(o,"jugador",{posIniX:0,posIniY:0,velX:o.velJugador,velY:o.velJugador,moving:!1,direccion:{le:[-1,0,0,"le"],ri:[1,0,0,"ri"],up:[0,-1,0,"up"],do:[0,1,0,"do"]},teclas:{le:"left",ri:"right",up:"up",do:"down"}}),e(o,"incGodownInvaders",[2,2,4,5,8,10,12,15,18,20,22,25,28,30,30,30,30,30,30,30,30]),e(o,"pausas",{revivir:4e3,invisible:3e3,showBonus:3500,nivelSuperado:{superado:!1,duracion:3200},duracionExplosion:{jugador:1e3,enemigo:400}}),e(o,"depth",{fondo:-200,bloques:-180,limites:-160,jugador:-140,enemigo:-120,explosiones:-100,marcadores:-50,textos:-40,mobileControls:-30}),e(o,"array_laberinto",[[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,1,1,1,1,1,1,1,1,9,1,1,1,1,1,1,1,1,9],[9,1,9,9,1,9,9,9,1,9,1,9,9,9,1,9,9,1,9],[9,1,9,9,1,9,9,9,1,9,1,9,9,9,1,9,9,1,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9],[9,1,9,9,1,9,1,9,9,9,9,9,1,9,1,9,9,1,9],[9,1,1,1,1,9,1,1,1,9,1,1,1,9,1,1,1,1,9],[9,9,9,9,1,9,9,9,1,9,1,9,9,9,1,9,9,9,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9],[9,1,9,9,1,9,1,9,1,9,1,9,1,9,1,9,9,1,9],[9,1,9,9,1,9,1,9,1,9,1,9,1,9,1,9,9,1,9],[9,1,1,1,1,9,1,1,1,1,1,1,1,9,1,1,1,1,9],[9,1,9,9,1,9,1,9,9,9,9,9,1,9,1,9,9,1,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9]]);let i=o;class a{constructor(t,e){this.relatedScene=t,this.datos=e}create(){const{x:t,y:e,txt:s,size:o,color:i,style:a,stroke:r,sizeStroke:n,shadowOsx:c,shadowOsy:h,shadowColor:l,bool1:d,bool2:g,origin:u,elastic:f,dura:m}=this.datos;this.texto=this.relatedScene.add.text(t,e,s,{fontSize:o+"px",fill:i,fontFamily:"verdana, arial, sans-serif",fontStyle:a}),this.texto.setOrigin(u[0],u[1]),this.texto.setStroke(r,n),this.texto.setShadow(c,h,l,2,d,g),this.elastic(s,f,m),console.log(this.texto)}elastic(t,e,s){s>0&&this.relatedScene.tweens.add({targets:this.texto,y:e,ease:"Elastic",duration:s})}get(){return this.texto}}class r extends s.Scene{constructor(){super("Boot")}init(){this.txt=new a(this,{x:Math.floor(this.sys.game.config.width/2),y:Math.floor(this.sys.game.config.height/2),txt:" Touch screen or \n \n click to start... ",size:60,color:"#ffa",style:"bold",stroke:"#1e9",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0})}preload(){this.load.image("fondo","assets/img/bg.png")}create(){this.add.image(0,0,"fondo").setOrigin(0,0),this.txt.create(),this.input.on("pointerdown",(()=>this.scene.start("Preloader"))),console.log(this.txt)}}class n extends s.Scene{constructor(){super("Preloader")}init(){const t=this.sys.game.config.width,e=this.sys.game.config.height;this.load.image("fondo","assets/img/bg.png"),this.add.image(0,0,"fondo").setOrigin(0,0),this.txt=new a(this,{x:Math.floor(t/2),y:Math.floor(e/3.5),txt:" Loading...",size:55,color:"#ffa",style:"bold",stroke:"#f91",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txt.create(),this.add.rectangle(Math.floor(t/2),Math.floor(e/2),Math.floor(t/1.5),Math.floor(e/12)).setStrokeStyle(1,16772744);const s=this.add.rectangle(Math.floor(t/2)-Math.floor(t/3)+4,Math.floor(e/2),4,Math.floor(e/14),16750865);this.load.on("progress",(e=>{s.width=Math.floor(t/1.52)*e}))}preload(){this.load.setPath("assets"),this.load.image("fondo","./img/bg.png"),this.load.image("boton-nueva-partida","./img/boton-start.png"),this.load.image("boton-fire-joystick","./img/boton-fire-joystick.png"),this.load.spritesheet("radio-buttons","./img/radio-buttons-ssheet.png",{frameWidth:50,frameHeight:50}),this.load.spritesheet("boton-fullscreen","./img/boton-fullscreen.png",{frameWidth:64,frameHeight:64});for(let t=7;t<10;t++)this.load.image(`tile${t}`,`./img/tile${t}.png`);this.load.spritesheet("pengo-ssheet","./img/pengo-ssheet.png",{frameWidth:50,frameHeight:50}),this.load.plugin("rexvirtualjoystickplugin","https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/dist/rexvirtualjoystickplugin.min.js",!0)}create(){this.scene.start("MainMenu")}}function c(t,e){console.log("colision"),this.jugador.get().setX(this.jugador.viejaX),this.jugador.get().setY(this.jugador.viejaY)}function h(t,e,s){t.volume=s,t.loop=e,t.play()}class l{constructor(t){this.relatedScene=t}create(t,e){const s=this.relatedScene.sys.game.config.width,o=this.relatedScene.sys.game.config.height;this.boton=this.relatedScene.add.sprite(Math.floor(s/2),Math.floor(o/1.6),"boton-nueva-partida").setInteractive(),this.boton.setScale(.6).setAngle(1).setDepth(30),this.boton.on("pointerover",(()=>{this.boton.setScale(.7)})),this.boton.on("pointerout",(()=>{this.boton.setScale(.6)})),this.boton.on("pointerdown",(e=>{this.relatedScene.scene.start(t),console.log(e)})),this.relatedScene.tweens.add({targets:this.boton,angle:359,ease:"Elastic",yoyo:!0,hold:2e3,duration:3e3,repeat:-1})}get(){return this.boton}}class d{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{x:t,y:e,id:s,scX:o,scY:i,ang:a}=this.args;this.boton=this.relatedScene.add.image(t,e,s).setInteractive(),this.boton.setScale(o,i),this.boton.setAngle(a).setFrame(0).setDepth(50),this.boton.setX(t).setY(e+Math.floor(this.boton.height/2)),this.boton.on("pointerover",(()=>{this.boton.setScale(o+.1,i+.1)})),this.boton.on("pointerout",(()=>{this.boton.setScale(o,i)})),this.boton.on("pointerdown",(()=>{this.relatedScene.scale.isFullscreen?this.relatedScene.scale.stopFullscreen():this.relatedScene.scale.startFullscreen()}))}}class g{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{left:t,top:e,frame:s,scale:o,texto:r,id:n}=this.args;this.radiobutton=this.relatedScene.add.sprite(t,e,"radio-buttons").setInteractive(),this.radiobutton.setOrigin(0,.5).setScale(o).setDepth(i.depth.textos).setFrame(s),this.radiobutton.setData("id",n),this.txt=new a(this.relatedScene,{x:t+60,y:e,txt:r,size:45,color:"#ffa",style:"bold",stroke:"#f71",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[0,.5],elastic:!1,dura:0}),this.txt.create(),this.radiobutton.on("pointerover",(()=>{this.txt.get().setScale(o+.1),this.radiobutton.setScale(o+.1)})),this.radiobutton.on("pointerout",(()=>{this.txt.get().setScale(o),this.radiobutton.setScale(o)})),this.radiobutton.on("pointerdown",(t=>{this.relatedScene.radiobuttons.forEach((t=>t.get().setFrame(0))),this.radiobutton.setFrame(1),Object.keys(i.controlElegido).forEach((t=>{i.controlElegido[t]=!1})),i.controlElegido[this.radiobutton.getData("id")]=!0,console.log(i.controlElegido.mobile,i.controlElegido.teclado)}))}get(){return this.radiobutton}}class u extends s.Scene{constructor(){super("MainMenu")}init(){this.botoninicio=new l(this),this.txt=new a(this,{x:Math.floor(this.sys.game.config.width/2),y:0,txt:" PinguClon ",size:100,color:"#ffa",style:"bold",stroke:"#1ca",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:Math.floor(this.sys.game.config.height/4),dura:3e3})}preload(){}create(){this.add.image(0,0,"fondo").setOrigin(0,0),this.txt.create(),this.add.text(Math.floor(this.sys.game.config.width/4),Math.floor(this.sys.game.config.height/1.04),"Based on classic arcade game Pengo of Sega 1982",{fontSize:"16px",color:"#ff1",align:"justify",fontFamily:"Arial"}),this.add.timeline([{at:1800,run:()=>{this.botoninicio.create("PreGame",!1)}}]).play(),console.log(this.txt)}}class f{constructor(t){this.relatedScene=t}create(){this.tile=this.relatedScene.physics.add.group();for(let t=0;t<i.array_laberinto.length;t++)for(let e=0;e<i.array_laberinto[t].length;e++){const s=i.array_laberinto[t][e];this.elegir_tilesNiveles(s,t,e)}console.log(this.tile)}static check_colision(t,e){return 9===i.array_laberinto[e][t]}elegir_tilesNiveles(t,e,s){1!==t&&this.tile.create(s*i.tileXY.x,e*i.tileXY.y,`tile${t}`).setScale(.75).setDepth(i.depth.bloques).setImmovable(!0).refreshBody()}get(){return this.tile}}class m{constructor(t){this.relatedScene=t}create(t,e){this.jugador=this.relatedScene.physics.add.sprite(t,e,"pengo-ssheet"),this.jugador.setAngle(0).setDepth(i.depth.jugador).setScale(.9),this.jugador.setCircle(Math.floor(i.tileXY.y/2)),this.jugador.setData("direccion","ri"),this.jugador.setData("anima",this.jugador.getData("direccion"));const s=[["le",2,3],["ri",6,7],["up",4,5],["do",0,1]];for(let o=0;o<s.length;o++)this.relatedScene.anims.create({key:s[o][0],frames:this.relatedScene.anims.generateFrameNumbers("pengo-ssheet",{start:s[o][1],end:s[o][2]}),frameRate:5,yoyo:!0,repeat:-1});this.relatedScene.anims.create({key:"turn",frames:[{key:"pengo-ssheet",frame:23}],frameRate:20}),this.jugador.anims.play(this.jugador.getData("anima"),!0),this.controles=this.relatedScene.input.keyboard.createCursorKeys(),console.log(this.jugador)}update(){this.jugador.x%i.tileXY.x==0&&this.jugador.y%i.tileXY.y==0&&(i.setJugadorMoving(!1),this.viejaX=this.jugador.x,this.viejaY=this.jugador.y),i.jugador.direccion,i.isJugadorMoving()?this.set_velocity():(Object.keys(i.jugador.direccion).forEach((t=>{const e=i.jugador.teclas[t];(this.controles[e].isDown||this.relatedScene.joystickCursors[e].isDown)&&(i.setJugadorMoving(!0),this.jugador.setData("direccion",t),this.jugador.setData("anima",this.jugador.getData("direccion")),this.jugador.anims.play(this.jugador.getData("anima"),!0),this.jugador.setAngle(i.jugador.direccion[this.jugador.getData("direccion")][2]),this.set_velocity())})),this.controles.space.isDown&&console.log("empujar"))}set_velocity(){const t=i.jugador.direccion[this.jugador.getData("direccion")][0],e=i.jugador.direccion[this.jugador.getData("direccion")][1];this.jugador.x+=t*i.jugador.velX,this.jugador.y+=e*i.jugador.velY}get(){return this.jugador}}class p{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{left:t,top:e}=this.args;this.jugadorshowvidas=this.relatedScene.physics.add.group({key:["pacman"],frameQuantity:i.getVidas(),setXY:{x:t,y:e,stepX:i.tileXY.x},frame:4}),this.jugadorshowvidas.children.iterate((t=>{t.setOrigin(.5,0).setScale(1,.7).setBlendMode(Phaser.BlendModes.ADD)})),console.log(this.jugadorshowvidas)}get(){return this.jugadorshowvidas}}class y{constructor(t){this.relatedScene=t}create(){this.marcadores=this.relatedScene.add.group();const t=this.relatedScene.sys.game.config.width;this.relatedScene.sys.game.config.height,this.args=[[" Score: ",24,"#fff","#2ef",7,0,0,i.getPuntos()],[" Level: ",24,"#ff7","#2ef",7,Math.floor(t/2.2),0,i.getNivel()],[" Hi: ",24,"#fff","#2ef",7,Math.floor(t/1.5),0,i.getRecord()]],this.args.forEach(((t,e)=>{let s=this.relatedScene.add.text(t[5],t[6],t[0]+t[7],{fontSize:t[1]+"px",fill:t[2],fontFamily:"verdana, arial, sans-serif",shadow:{offsetX:1,offsetY:1,color:t[3],blur:t[4],fill:!0}});this.marcadores.add(s)})),console.log(this.marcadores)}update(t,e){this.marcadores.getChildren()[t].setText(this.args[t][0]+e)}get(){return this.marcadores}}class b extends s.Scene{constructor(){super("Game")}init(){i.setGameOver(!1),this.set_pausaInicial(4300),this.bloques=new f(this),this.jugador=new m(this),this.botonrejugar=new l(this)}preload(){}create(){this.add.image(0,0,"fondo").setScale(1.48,1.68).setDepth(i.depth.fondo).setOrigin(0,0),this.set_cameras(),this.bloques.create(),this.jugador.create(2*i.tileXY.x,1*i.tileXY.y),this.rexVirtualJoystick(),this.hideMobileControls(),this.cameras.main.startFollow(this.jugador.get()),this.set_colliders()}update(){this.pausa_inicial.activa||i.isGameOver()||this.jugador.update()}set_pausaInicial(t){this.pausa_inicial={duracion:t,activa:!1}}texto_enhorabuena(){this.txtcongrats=new a(this,{x:this.jugador.get().x,y:0,txt:" Congratulations! ",size:70,color:"#ffa",style:"bold",stroke:"#5f1",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:this.jugador.get().y-i.tileXY.y,dura:3e3}),this.txtcongrats.create(),this.txtcongrats.get().setDepth(i.getDepth().textos)}set_colliders(){this.physics.add.collider(this.jugador.get(),this.bloques.get(),c,null,this)}rexVirtualJoystick(){this.joyStick=this.plugins.get("rexvirtualjoystickplugin").add(this,{x:90,y:this.sys.game.config.height-50,radius:60,base:this.add.circle(0,0,60,8947848,.4),thumb:this.add.circle(0,0,30,13421772,.7),dir:"4dir",fixed:!0,enable:!0}),console.log(this.joyStick),this.joystickCursors=this.joyStick.createCursorKeys()}hideMobileControls(){console.log(i.controlElegido),i.controlElegido.mobile||this.joyStick.setVisible(!1)}set_cameras(){this.cameras.main.setBounds(0,0,Math.floor(this.sys.game.config.width*i.screen.escBoundsX),Math.floor(this.sys.game.config.height*i.screen.escBoundsY)),this.physics.world.setBounds(0,0,Math.floor(this.sys.game.config.width*i.screen.escBoundsX),Math.floor(this.sys.game.config.height*i.screen.escBoundsY))}set_cameras_controles(){var{x:t,y:e,ancho:s,alto:o,scrollX:a,scrollY:r}=i.getCameraControles();this.mapa_controles=this.cameras.add(t,e,s,o).setZoom(.9).setName("view-controls").setAlpha(.7).setOrigin(0,0),this.mapa_controles.scrollX=a,this.mapa_controles.scrollY=r}set_cameras_marcadores(){var{x:t,y:e,ancho:s,alto:o,scrollX:a,scrollY:r}=i.getCameraScores();this.mapa_scores=this.cameras.add(t,e,s,o).setZoom(.6).setName("view-scores").setAlpha(1).setOrigin(0,0),this.mapa_scores.scrollX=a,this.mapa_scores.scrollY=r}instanciar_marcadores(){const t=this.sys.game.config.width;this.sys.game.config.height;this.jugadorshowvidas=new p(this,{left:Math.floor(1.4*t),top:-90}),this.marcadorPtos=new y(this,{x:10,y:-99,size:40,txt:i.getTxtScore(),color:"#fff",id:0}),this.marcadorNivel=new y(this,{x:Math.floor(t/2),y:-99,size:40,txt:" Level: ",color:"#ff5",id:1}),this.marcadorHi=new y(this,{x:Math.floor(t/1.2),y:-99,size:40,txt:" Record: ",color:"#fff",id:2}),this.botonfullscreen=new d(this,{x:Math.floor(1.33*t),y:-90})}instanciar_mobileControls(){var{xx:t,yy:e,sizeX:s,sizeY:o}=i.getCoorCruceta();this.crucetaleft=new CrucetaDireccion(this,{id:"cruceta-left",press:"left",x:t,y:e+55,ang:0,scX:s,scY:o}),this.crucetaright=new CrucetaDireccion(this,{id:"cruceta-right",press:"right",x:t+350,y:e+55,ang:0,scX:s,scY:o}),this.crucetaup=new CrucetaDireccion(this,{id:"cruceta-left",press:"up",x:t+175,y:e-80,ang:90,scX:s-.7,scY:o+.1}),this.crucetadown=new CrucetaDireccion(this,{id:"cruceta-left",press:"down",x:t+175,y:e+80,ang:270,scX:s-.5,scY:o+.1}),this.iconogamepad=new IconoGamePad(this,{id:"icono-gamepad",x:t+90,y:e,ang:0,scX:2,scY:2})}set_sonidos(){this.sonido_preparado=this.sound.add("sonidoPacmanInicioNivel"),h(this.sonido_preparado,!1,.8),this.sonido_waka=this.sound.add("sonidoWakaWaka"),this.sonido_jugadorDies=this.sound.add("sonidoPacmanDies"),this.sonido_eatingGhost=this.sound.add("sonidoPacmanEatingGhost"),this.sonido_eatingCherry=this.sound.add("sonidoPacmanEatingCherry"),this.sonido_fantasmasScary=this.sound.add("sonidoPacmanAzules"),this.sonido_sirena=this.sound.add("sonidoPacmanSirena")}}class x extends s.Scene{constructor(){super("PreGame")}init(){i.setPuntos(0),i.setNivel(1),i.setVidas(3),i.setGameOver(!1),i.setNivelSuperado(!1),i.controlElegido.mobile=!1,i.controlElegido.teclado=!0,this.botoninicio=new l(this),this.radiobuttons=[],this.radiobuttons.push(new g(this,{left:Math.floor(this.sys.game.config.width/15),top:Math.floor(this.sys.game.config.height/4),frame:1,scale:1,texto:" Keyboard cursors ",id:"teclado"})),this.radiobuttons.push(new g(this,{left:Math.floor(this.sys.game.config.width/15),top:Math.floor(this.sys.game.config.height/2.6),frame:0,scale:1,texto:" Mobile controls ",id:"mobile"}))}create(){this.add.image(0,0,"fondo").setDepth(i.depth.fondo).setOrigin(0,0),this.radiobuttons.forEach((t=>t.create())),this.botoninicio.create("Game",!1)}}class v extends Phaser.Scene{constructor(){super({key:"Congratulations"})}init(){this.botoninicio=new l(this)}create(){this.add.image(0,0,"fondo").setOrigin(0,0),this.incremento_nivel=i.getNivel()+1,i.setNivelSuperado(!1),this.sonido_intermision=this.sound.add("aliens-atmos"),this.txt=new a(this,{x:Math.floor(this.sys.game.config.width/2),y:Math.floor(this.sys.game.config.height/3.5),txt:" Level Up! ",size:86,color:"#ffa",style:"bold",stroke:"#1cb",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txt.create(),this.txt.get().setDepth(i.depth.textos).setAlpha(1),this.timeline=this.add.timeline([{at:3200,run:()=>{i.setNivel(this.incremento_nivel),this.botoninicio.create("Game",!1)}}]),this.timeline.play(),h(this.sonido_intermision,!1,.8),console.log(this.txt)}}const S={type:Phaser.AUTO,width:800,height:550,parent:"game-container",backgroundColor:"#655500",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{debug:!1}},scene:[r,n,u,x,b,v]};new Phaser.Game(S);
